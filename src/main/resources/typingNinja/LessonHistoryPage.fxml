<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.chart.*?>
<?import javafx.geometry.Insets?>

<BorderPane xmlns:fx="http://javafx.com/fxml"
            fx:controller="typingNinja.controllers.LessonHistoryController"
            style="-fx-background-color: #0A002C; -fx-font-family: 'Jaro';">

    <top>
        <BorderPane BorderPane.alignment="TOP_LEFT">
            <!-- 左侧标题部分 -->
            <left>
                <VBox spacing="5" alignment="TOP_LEFT">
                    <padding>
                        <Insets top="10" right="0" bottom="0" left="10"/>
                    </padding>

                    <!-- 大标题 -->
                    <Label text="LESSON HISTORY"
                           style="-fx-font-family: 'Jaro'; -fx-font-size: 96; -fx-text-fill: white;"/>

                    <!-- 绿色小标题 -->
                    <Label fx:id="personalBestLabel"
                           text="Personal Best Full Keyboard Result: Loading..."
                           style="-fx-text-fill: #39ff14; -fx-font-size: 20; -fx-font-weight: bold;"/>
                </VBox>
            </left>

            <!-- 右上角返回按钮 -->
            <right>
                <Button fx:id="backBtn" text="Back"
                        onAction="#onBackClicked"
                        style="
                        -fx-background-color: #39ff14;
                        -fx-text-fill: #000000;
                        -fx-font-size: 18;
                        -fx-font-weight: bold;
                        -fx-background-radius: 10;
                        -fx-padding:10 26 10 26;
                        -fx-cursor: hand;"
                        BorderPane.alignment="TOP_RIGHT"/>
            </right>
        </BorderPane>
    </top>


    <center>
        <VBox spacing="15" alignment="CENTER" BorderPane.alignment="CENTER">
            <!-- 上半部分：滚动框 + 折线图 -->
            <HBox spacing="40" alignment="CENTER">
                <!-- 左侧 Lesson 列表（可滚动） -->
                <VBox alignment="CENTER">
                    <ScrollPane fx:id="lessonScroll" fitToWidth="true" prefWidth="500" prefHeight="400"
                                style="-fx-background: transparent; -fx-background-color: transparent;">
                        <VBox fx:id="lessonList" spacing="10"
                              style="
                          -fx-background-color: #D9D9D9;
                          -fx-background-radius: 15;
                          -fx-border-radius: 15;
                          -fx-border-color: transparent;
                          -fx-border-width: 3;
                          -fx-padding: 15;">
                            <Label text="Loading lessons..." style="-fx-text-fill: black;"/>
                        </VBox>
                    </ScrollPane>

                    <!-- ✅ 新增：导出按钮在滚动框下方 -->
                    <HBox alignment="CENTER" spacing="20" prefWidth="500">
                        <Button text="Export to PDF" fx:id="exportPdfBtn"
                                style="
            -fx-background-color: #39ff14;
            -fx-font-weight: bold;
            -fx-pref-width: 180;
            -fx-background-radius: 40;
        "/>

                        <Button text="Export to CSV" fx:id="exportCsvBtn"
                                style="
            -fx-background-color: #39ff14;
            -fx-font-weight: bold;
            -fx-pref-width: 180;
            -fx-background-radius: 40;
        "/>

                    </HBox>
                </VBox>

                <!-- 右侧：折线图 -->
                <LineChart fx:id="lineChart" prefWidth="500" prefHeight="400" legendVisible="false">
                    <xAxis>
                        <CategoryAxis label="Date" />
                    </xAxis>
                    <yAxis>
                        <NumberAxis label="WPM" />
                    </yAxis>
                </LineChart>
            </HBox>
        </VBox>
    </center>


    <bottom>
        <HBox alignment="CENTER" spacing="15" BorderPane.alignment="CENTER">
            <padding>
                <Insets top="20" bottom="20"/>
            </padding>

            <Label fx:id="mainMenuLabel" text="MAIN MENU"
                   style="-fx-text-fill: white; -fx-font-size: 40; -fx-cursor: hand; -fx-font-weight: bold;"/>
            <Label text="|" style="-fx-text-fill: white; -fx-font-size: 40;"/>
            <Label fx:id="profileLabel" text="PROFILE"
                   style="-fx-text-fill: #39ff14; -fx-font-size: 40; -fx-cursor: hand; -fx-font-weight: bold;"/>
            <Label text="|" style="-fx-text-fill: white; -fx-font-size: 40;"/>
            <Label fx:id="settingsLabel" text="SETTINGS"
                   style="-fx-text-fill: white; -fx-font-size: 40; -fx-cursor: hand; -fx-font-weight: bold;"/>
        </HBox>
    </bottom>
</BorderPane>

