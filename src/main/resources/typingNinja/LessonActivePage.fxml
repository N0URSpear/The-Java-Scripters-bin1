<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<BorderPane xmlns="http://javafx.com/javafx/21.0.3" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="typingNinja.controllers.LessonActivePageController"
            stylesheets="@application.css">
  <top>
    <HBox fx:id="buttonBar" spacing="12" alignment="CENTER_RIGHT" styleClass="toolbar">
      <children>
        <Region HBox.hgrow="ALWAYS"/>
        <Button fx:id="pauseButton" text="⏯ Pause"/>
      </children>
      <padding><Insets top="8" right="12" bottom="8" left="12"/></padding>
    </HBox>
  </top>
  <center>
    <GridPane>
      <columnConstraints>
        <ColumnConstraints percentWidth="100.0" hgrow="ALWAYS"/>
      </columnConstraints>
      <rowConstraints>
        <RowConstraints percentHeight="60.0" vgrow="ALWAYS"/>
        <RowConstraints percentHeight="40.0" vgrow="ALWAYS"/>
      </rowConstraints>
      <VBox GridPane.rowIndex="0" GridPane.columnIndex="0" GridPane.hgrow="ALWAYS" spacing="10" fillWidth="true" maxWidth="Infinity">
        <padding><Insets top="8" right="12" bottom="6" left="12"/></padding>
        <children>
          <ScrollPane fx:id="readingScroll" fitToWidth="true" hbarPolicy="NEVER" vbarPolicy="AS_NEEDED" VBox.vgrow="ALWAYS" styleClass="reading-scroll">
            <content>
              <StackPane fx:id="readingStack" styleClass="reading-pane">
                <children>
                  <TextFlow fx:id="promptFlow" lineSpacing="30"/>
                  <TextFlow fx:id="userFlow" lineSpacing="30"/>
                </children>
                <padding><Insets top="12" right="12" bottom="12" left="12"/></padding>
              </StackPane>
            </content>
          </ScrollPane>
          <StackPane maxWidth="Infinity">
            <children>
              <ProgressBar fx:id="timeProgress" maxWidth="Infinity" prefHeight="34"/>
              <Label fx:id="timerLabel" styleClass="timer-overlay"/>
            </children>
          </StackPane>
        </children>
      </VBox>
      <GridPane fx:id="helpGrid" GridPane.rowIndex="1" GridPane.columnIndex="0" GridPane.hgrow="ALWAYS" maxWidth="Infinity" hgap="16" vgap="8">
        <columnConstraints>
          <ColumnConstraints percentWidth="25"/>
          <ColumnConstraints percentWidth="50"/>
          <ColumnConstraints percentWidth="25"/>
        </columnConstraints>
        <padding><Insets top="6" right="12" bottom="12" left="12"/></padding>
        <children>
          <VBox fx:id="statsBox" spacing="6" GridPane.columnIndex="0" styleClass="stats-card" minHeight="0">
            <children>
              <Label text="Statistics" styleClass="card-title"/>
              <GridPane hgap="10" vgap="6">
                <columnConstraints>
                  <ColumnConstraints halignment="LEFT" percentWidth="40"/>
                  <ColumnConstraints halignment="LEFT" percentWidth="60"/>
                </columnConstraints>
                <children>
                  <Label text="Lesson:" GridPane.rowIndex="0" GridPane.columnIndex="0" styleClass="stat-label-title"/>
                  <Label fx:id="lessonTitleLabel" text="—" GridPane.rowIndex="0" GridPane.columnIndex="1" styleClass="stat-label-value"/>
                  <Label fx:id="promptTitleLabel" text="Prompt:" GridPane.rowIndex="1" GridPane.columnIndex="0" styleClass="stat-label-title"/>
                  <Label fx:id="promptDisplayLabel" text="--" GridPane.rowIndex="1" GridPane.columnIndex="1" styleClass="stat-label-value"/>
                  <Label text="Duration:" GridPane.rowIndex="2" GridPane.columnIndex="0" styleClass="stat-label-title"/>
                  <Label fx:id="lessonDurationLabel" text="—" GridPane.rowIndex="2" GridPane.columnIndex="1" styleClass="stat-label-value"/>
                  <Label text="WPM:" GridPane.rowIndex="3" GridPane.columnIndex="0" styleClass="stat-label-title"/>
                  <Label fx:id="wpmLabel" text="0" GridPane.rowIndex="3" GridPane.columnIndex="1" styleClass="stat-label-value"/>
                  <Label fx:id="errorsTitleLabel" text="Errors:" GridPane.rowIndex="4" GridPane.columnIndex="0" styleClass="stat-label-title"/>
                  <Label fx:id="errorsLabel" text="0" GridPane.rowIndex="4" GridPane.columnIndex="1" styleClass="stat-label-value"/>
                  <Label fx:id="accuracyTitleLabel" text="Error rate:" GridPane.rowIndex="5" GridPane.columnIndex="0" styleClass="stat-label-title"/>
                  <Label fx:id="accuracyLabel" text="100%" GridPane.rowIndex="5" GridPane.columnIndex="1" styleClass="stat-label-value"/>
                </children>
              </GridPane>
            </children>
          </VBox>
          <GridPane fx:id="keyboardGrid" GridPane.columnIndex="1" GridPane.hgrow="ALWAYS" GridPane.vgrow="ALWAYS" maxWidth="Infinity" maxHeight="Infinity" hgap="6" vgap="6"/>
          <VBox spacing="8" alignment="CENTER" GridPane.columnIndex="2" GridPane.vgrow="ALWAYS" GridPane.hgrow="ALWAYS" maxWidth="Infinity" maxHeight="Infinity" fillWidth="true">
            <children>
              <Region fx:id="handsRegion" prefWidth="180" prefHeight="140" minHeight="0" maxWidth="Infinity" maxHeight="Infinity" VBox.vgrow="ALWAYS" styleClass="hands-placeholder"/>
              <Label fx:id="handsLabel" text="" visible="false" managed="false"/>
            </children>
          </VBox>
        </children>
      </GridPane>
    </GridPane>
  </center>
  <bottom>
    <StackPane>
      <TextArea fx:id="hiddenInput" prefRowCount="1" opacity="0.0" focusTraversable="true" wrapText="false" managed="false"/>
    </StackPane>
  </bottom>
</BorderPane>
